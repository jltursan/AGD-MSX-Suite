; Game-specific data and events code generated by the compiler ------------------

DEFINEWINDOW 1 1 22 30

DEFINEFONT      0 0 0 0 0 0 0 0
                0 48 48 48 48 0 48 0
                0 108 108 0 0 0 0 0
                0 108 254 108 108 254 108 0
                0 24 126 120 126 30 126 24
                0 230 236 24 48 110 206 0
                0 48 120 48 126 204 126 0
                0 24 48 0 0 0 0 0
                0 12 24 24 24 24 12 0
                0 96 48 48 48 48 96 0
                0 0 60 24 126 24 60 0
                0 0 24 24 126 24 24 0
                0 0 0 0 0 24 24 48
                0 0 0 0 126 0 0 0
                0 0 0 0 0 56 56 0
                0 0 6 12 24 48 96 0
                0 124 206 222 246 230 124 0
                0 56 120 24 24 24 126 0
                0 124 198 6 124 192 254 0
                0 124 198 28 6 198 124 0
                0 24 56 120 216 254 24 0
                0 254 192 252 6 198 124 0
                0 124 192 252 198 198 124 0
                0 254 6 12 24 48 48 0
                0 124 198 124 198 198 124 0
                0 124 198 198 126 6 124 0
                0 0 0 48 0 0 48 0
                0 0 48 0 0 48 48 96
                0 0 12 24 48 24 12 0
                0 0 0 126 0 126 0 0
                0 0 48 24 12 24 48 0
                0 124 198 12 24 0 24 0
                0 124 222 254 254 192 124 0
                0 124 198 198 254 198 198 0
                0 252 198 252 198 198 252 0
                0 124 198 192 192 198 124 0
                0 248 204 198 198 204 248 0
                0 254 192 252 192 192 254 0
                0 254 192 252 192 192 192 0
                0 124 198 192 222 198 124 0
                0 198 198 254 198 198 198 0
                0 126 24 24 24 24 126 0
                0 6 6 6 198 198 124 0
                0 204 216 240 216 204 198 0
                0 192 192 192 192 192 254 0
                0 198 238 254 198 198 198 0
                0 198 230 246 222 206 198 0
                0 124 198 198 198 198 124 0
                0 252 198 198 252 192 192 0
                0 124 198 198 246 222 124 0
                0 252 198 198 252 204 198 0
                0 124 192 124 6 198 124 0
                0 254 48 48 48 48 48 0
                0 198 198 198 198 198 124 0
                0 198 198 198 198 108 56 0
                0 198 198 198 198 254 108 0
                0 198 108 56 56 108 198 0
                0 134 204 120 48 48 48 0
                0 254 12 24 48 96 254 0
                0 30 24 24 24 24 30 0
                0 0 192 96 48 24 12 0
                0 240 48 48 48 48 240 0
                0 48 120 252 48 48 48 0
                0 0 0 0 0 0 0 255
                0 60 102 248 96 96 254 0
                0 0 120 12 124 204 124 0
                0 96 96 124 102 102 124 0
                0 0 60 96 96 96 60 0
                0 12 12 124 204 204 124 0
                0 0 120 204 248 192 124 0
                0 28 48 56 48 48 48 0
                0 0 124 204 204 124 12 120
                0 192 192 248 204 204 204 0
                0 48 0 112 48 48 120 0
                0 12 0 12 12 12 108 56
                0 96 120 112 112 120 108 0
                0 48 48 48 48 48 28 0
                0 0 248 252 252 252 252 0
                0 0 248 204 204 204 204 0
                0 0 120 204 204 204 120 0
                0 0 248 204 204 248 192 192
                0 0 124 204 204 124 12 14
                0 0 60 96 96 96 96 0
                0 0 120 192 120 12 248 0
                0 48 120 48 48 48 28 0
                0 0 204 204 204 204 120 0
                0 0 204 204 120 120 48 0
                0 0 204 252 252 252 120 0
                0 0 204 120 48 120 204 0
                0 0 204 204 204 124 12 120
                0 0 252 24 48 96 252 0
                0 30 24 112 24 24 30 0
                0 24 24 24 24 24 24 0
                0 240 48 28 48 48 240 0
                0 60 120 0 0 0 0 0
                124 198 187 227 227 187 198 124

MAP	WIDTH 3
	STARTSCREEN 0

	255,0,255
ENDMAP

DEFINEMESSAGES
	"SCORE"
	"  HIGH"
	"DODGY GEEZE"
	" GAME"
	" OVER"
	" NEW HIGH SCORE"

DEFINEBLOCK EMPTYBLOCK 0 0 0 0 0 0 0 0 $F1 $F1 $F1 $F1 $F1 $F1 $F1 $F1
DEFINEBLOCK WALLBLOCK  $FE,$FE,$FE,$00,$EF,$EF,$EF,$00,$8E,$8E,$6E,$1E,$8E,$8E,$6E,$1E

DEFINESPRITE 4
	17,115,55,21,42,125,107,236,206,143,135,13,28,24,12,126,136,206,236,168,80,180,222,54,119,243,241,185,28,56,126,0	
	17,115,55,21,10,45,123,108,238,223,187,185,12,126,0,0,136,206,236,168,84,190,214,55,115,241,225,176,56,24,48,126
	17,115,55,21,10,45,123,108,238,207,143,157,56,28,126,0,136,206,236,168,84,190,214,55,115,241,225,176,56,24,48,126  
	17,115,55,21,42,125,107,236,206,143,135,13,28,24,12,126,136,206,236,168,80,180,222,54,119,251,221,157,48,126,0,0

;DEFINESPRITE 3
;	48,48,31,56,55,47,47,47,46,46,47,47,240,223,0,0,0,0,251,31,236,244,244,52,84,20,52,244,12,248,12,12
;	3,3,31,56,55,47,47,46,236,236,46,47,48,31,0,0,0,0,248,28,236,244,247,119,180,52,116,244,12,248,192,192				
;	0,0,31,56,247,239,47,44,41,40,44,47,48,31,12,12,48,48,248,28,236,244,244,244,116,116,247,247,12,248,0,0	
	
DEFINESPRITE 4
	$00,$00,$3F,$63,$EB,$E8,$0F,$07,$0C,$0B,$1B,$1C,$3F,$3F,$3F,$3F,$00,$00,$FC,$C6,$D7,$17,$F0,$E0,$30,$D0,$D8,$38,$FC,$FC,$FC,$FC
	$3C,$7F,$7F,$63,$08,$08,$0F,$07,$0C,$0B,$1B,$1C,$3F,$3F,$3F,$3F,$00,$C0,$F8,$C6,$57,$17,$F7,$E0,$30,$D0,$D8,$38,$FC,$FC,$FC,$FC
	$00,$00,$3F,$63,$EB,$E8,$0F,$07,$0C,$0B,$1B,$1C,$3F,$3F,$3F,$3F,$00,$00,$FC,$C6,$D7,$17,$F0,$E0,$30,$D0,$D8,$38,$FC,$FC,$FC,$FC
	$00,$03,$1F,$63,$EA,$E8,$EF,$07,$0C,$0B,$1B,$1C,$3F,$3F,$3F,$3F,$3C,$FE,$FE,$C6,$10,$10,$F0,$E0,$30,$D0,$D8,$38,$FC,$FC,$FC,$FC

	
;DEFINESPRITE 4
;	60,28,124,30,254,63,254,63,255,127,63,255,15,252,7,240,15,224,63,240,255,252,254,255,252,127,252,127,120,62,56,60
;	0,252,96,254,240,254,248,252,252,248,255,240,255,224,255,224,7,255,7,255,15,255,31,63,63,31,127,15,127,6,63,0
;	60,28,124,30,254,63,254,63,255,127,63,255,15,252,7,240,15,224,63,240,255,252,254,255,252,127,252,127,120,62,56,60
;	63,0,127,6,127,15,63,31,31,63,15,255,7,255,7,255,255,224,255,224,255,240,252,248,248,252,240,254,96,254,0,252


DEFINESCREEN
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1

SPRITEPOSITION 0,0,15,88,128


; DEFINEOBJECT 255,80,24
; 	0,0,127,254,64,2,64,2,64,2,64,2,64,2,64,2
; 	64,2,64,2,64,2,64,2,64,2,64,2,127,254,0,0
; 	$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81
; 	$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81
;  
; DEFINEOBJECT 255,96,26
;  	0,0,127,254,64,2,64,2,64,2,64,2,64,2,64,2
;  	64,2,64,2,64,2,64,2,64,2,64,2,127,254,0,0
;  	$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81
;  	$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81
;  
; DEFINEOBJECT 255,112,28
;  	0,0,127,254,64,2,64,2,64,2,64,2,64,2,64,2
;  	64,2,64,2,64,2,64,2,64,2,64,2,127,254,0,0
;  	$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81
;  	$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81,$81

EVENT PLAYER
 LET M = 0
 IF KEY UP
  LET M = 1
  IF CANGOUP
   SPRITEUP
  ENDIF
 ENDIF
 IF KEY DOWN
  LET M = 1
  IF CANGODOWN
   SPRITEDOWN
  ENDIF
 ENDIF
 IF KEY LEFT
  LET M = 1
  IF CANGOLEFT
   SPRITELEFT
  ENDIF
 ENDIF
 IF KEY RIGHT
  LET M = 1
  IF CANGORIGHT
   SPRITERIGHT
  ENDIF
 ENDIF
 IF M > 0
  ANIMATE MEDIUM
 ENDIF
; SPRITEINK 7

EVENT SPRITETYPE1
; Up/down movement.
; DIRECTION variable indicates which way we're going.
; This isn't a platformer so we can use JUMPSPEED to determine vertical speed.
 IF DIRECTION = 0
  IF CANGOUP
   SPRITEUP
  ELSE
   ; BEEP 5
   LET DIRECTION = 1
  ENDIF
 ELSE
  IF CANGODOWN
   SPRITEDOWN
  ELSE
   ; BEEP 5
   LET DIRECTION = 0
  ENDIF
 ENDIF

; Double vertical speed if JUMPSPEED > 0
 IF JUMPSPEED > 0
  IF DIRECTION = 0
   IF CANGOUP
    SPRITEUP
   ELSE
    LET DIRECTION = 1
   ENDIF
  ELSE
   IF CANGODOWN
    SPRITEDOWN
   ELSE
    LET DIRECTION = 0
   ENDIF
  ENDIF
 ENDIF

; Left/right movement.
; Only one DIRECTION variable per sprite, so we use SETTINGA for the horizontal.
 IF SETTINGA = 0
  IF CANGOLEFT
   SPRITELEFT
  ELSE
   ;BEEP 5
   LET SETTINGA = 1
   GETRANDOM 2
   JUMPSPEED = RND
  ENDIF
 ELSE
  IF CANGORIGHT
   SPRITERIGHT
  ELSE
   ; BEEP 5
   LET SETTINGA = 0
   GETRANDOM 2
   JUMPSPEED = RND
  ENDIF
 ENDIF
 ;SPRITEINK SETTINGB
 ANIMATE MEDIUM
 IF COLLISION PLAYER
  KILL
 ENDIF

EVENT SPRITETYPE2

EVENT SPRITETYPE3

EVENT SPRITETYPE4

EVENT SPRITETYPE5

EVENT SPRITETYPE6

EVENT SPRITETYPE7

EVENT SPRITETYPE8

EVENT INITSPRITE

EVENT MAINLOOP1
; Use variable A as a counter
 ADD 1 TO A
 IF A > 10
  SCORE 10
  SUBTRACT 10 FROM A
  LET LINE = 0
  LET COLUMN = 10
  COLOUR $A1
  SHOWSCORE
  IF E < 11                                   ; no more than 11 enemy sprites on screen
   ADD 1 TO B
  ENDIF
  IF B > 110

   LET C = 255
  
   SPAWN 1 1
   SPAWNED
   READ SETTINGB
   SPRITEINK SETTINGB
   GETRANDOM 128
   LET X = RND
   ADD 16 TO X
   GETRANDOM 128
   LET Y = RND
   ADD 56 TO Y
   LET C = 128
   IF COLLISION PLAYER
    REMOVE
   ELSE
    SUBTRACT 20 FROM B
    ADD 1 TO E                      ; count enemies.
   ENDIF
   ENDSPRITE
   
   LET C = 0
  ENDIF  
ENDIF
DATA 13,12,10,6,4                             ; table of enemy sprite colours.

EVENT MAINLOOP2

EVENT INTROMENU

EVENT GAMEINIT

EVENT RESTARTSCREEN
 BORDER 1
 COLOUR $F1
 CLS
 PRINTMODE 0
 COLOUR $A1                                      ; bright yellow on black.
 LET LINE = 0
 LET COLUMN = 4
 PRINT "SCORE "
 SHOWSCORE
 PRINT "  HIGH "
 SHOWHIGH
 COLOUR $71                                      ; bright yellow on black.
 LET LINE = 23
 LET COLUMN = 10
 PRINT "DODGY GEEZER"
 LET LIVES = 1
 LET E = 0                                       ; enemy counter.
 LET A = 0
 LET B = 105

EVENT FELLTOOFAR

EVENT KILLPLAYER
 SUBTRACT 1 FROM LIVES

EVENT LOSTGAME
 PRINTMODE 1
 LET LINE = 8
 LET COLUMN = 13
 COLOUR $F8
 PRINT " GAME "
 ADD 2 TO LINE
 LET COLUMN = 13
 COLOUR $A8
 PRINT " OVER "
 WAITKEY

EVENT COMPLETEDGAME

EVENT NEWHIGHSCORE
 COLOUR $F4
 LET LINE = 14
 LET COLUMN = 8
 PRINT " NEW HIGH SCORE "
 COLOUR $A1 
 PRINTMODE 0
 LET LINE = 0
 LET COLUMN = 23
 SHOWHIGH

EVENT COLLECTBLOCK