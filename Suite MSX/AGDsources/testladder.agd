
DEFINEWINDOW    1 1 22 22

; DEFINECONTROLS  'Q' 'A' 'O' 'P' 'M' 'Z' 'H'

DEFINEMESSAGES
    "GAME OVER"
    "DIAMOND GEEZER"
    "SCORE"
    "LIVES"
    "1...CURSORS"
    "2...JOYSTICK 1"
    "3...JOYSTICK 2"
    "  Welcome to Diamond Geezer...Move around the levelscollecting diamonds andavoiding the deadlyskulls   +"

DEFINEFONT      0 0 0 0 0 0 0 0
                0 48 48 48 48 0 48 0
                0 108 108 0 0 0 0 0
                0 108 254 108 108 254 108 0
                0 24 126 120 126 30 126 24
                0 230 236 24 48 110 206 0
                0 48 120 48 126 204 126 0
                0 24 48 0 0 0 0 0
                0 12 24 24 24 24 12 0
                0 96 48 48 48 48 96 0
                0 0 60 24 126 24 60 0
                0 0 24 24 126 24 24 0
                0 0 0 0 0 24 24 48
                0 0 0 0 126 0 0 0
                0 0 0 0 0 56 56 0
                0 0 6 12 24 48 96 0
                0 124 206 222 246 230 124 0
                0 56 120 24 24 24 126 0
                0 124 198 6 124 192 254 0
                0 124 198 28 6 198 124 0
                0 24 56 120 216 254 24 0
                0 254 192 252 6 198 124 0
                0 124 192 252 198 198 124 0
                0 254 6 12 24 48 48 0
                0 124 198 124 198 198 124 0
                0 124 198 198 126 6 124 0
                0 0 0 48 0 0 48 0
                0 0 48 0 0 48 48 96
                0 0 12 24 48 24 12 0
                0 0 0 126 0 126 0 0
                0 0 48 24 12 24 48 0
                0 124 198 12 24 0 24 0
                0 124 222 254 254 192 124 0
                0 124 198 198 254 198 198 0
                0 252 198 252 198 198 252 0
                0 124 198 192 192 198 124 0
                0 248 204 198 198 204 248 0
                0 254 192 252 192 192 254 0
                0 254 192 252 192 192 192 0
                0 124 198 192 222 198 124 0
                0 198 198 254 198 198 198 0
                0 126 24 24 24 24 126 0
                0 6 6 6 198 198 124 0
                0 204 216 240 216 204 198 0
                0 192 192 192 192 192 254 0
                0 198 238 254 198 198 198 0
                0 198 230 246 222 206 198 0
                0 124 198 198 198 198 124 0
                0 252 198 198 252 192 192 0
                0 124 198 198 246 222 124 0
                0 252 198 198 252 204 198 0
                0 124 192 124 6 198 124 0
                0 254 48 48 48 48 48 0
                0 198 198 198 198 198 124 0
                0 198 198 198 198 108 56 0
                0 198 198 198 198 254 108 0
                0 198 108 56 56 108 198 0
                0 134 204 120 48 48 48 0
                0 254 12 24 48 96 254 0
                0 30 24 24 24 24 30 0
                0 0 192 96 48 24 12 0
                0 240 48 48 48 48 240 0
                0 48 120 252 48 48 48 0
                0 0 0 0 0 0 0 255
                0 60 102 248 96 96 254 0
                0 0 120 12 124 204 124 0
                0 96 96 124 102 102 124 0
                0 0 60 96 96 96 60 0
                0 12 12 124 204 204 124 0
                0 0 120 204 248 192 124 0
                0 28 48 56 48 48 48 0
                0 0 124 204 204 124 12 120
                0 192 192 248 204 204 204 0
                0 48 0 112 48 48 120 0
                0 12 0 12 12 12 108 56
                0 96 120 112 112 120 108 0
                0 48 48 48 48 48 28 0
                0 0 248 252 252 252 252 0
                0 0 248 204 204 204 204 0
                0 0 120 204 204 204 120 0
                0 0 248 204 204 248 192 192
                0 0 124 204 204 124 12 14
                0 0 60 96 96 96 96 0
                0 0 120 192 120 12 248 0
                0 48 120 48 48 48 28 0
                0 0 204 204 204 204 120 0
                0 0 204 204 120 120 48 0
                0 0 204 252 252 252 120 0
                0 0 204 120 48 120 204 0
                0 0 204 204 204 124 12 120
                0 0 252 24 48 96 252 0
                0 30 24 112 24 24 30 0
                0 24 24 24 24 24 24 0
                0 240 48 28 48 48 240 0
                0 60 120 0 0 0 0 0
                124 198 187 227 227 187 198 124

DEFINEJUMP      248 250 252 254 254 255 255 255 0 0 0 1 1 1 2 2 4 6 8 8 8 99

DEFINEBLOCK		EMPTYBLOCK 0 0 0 0 0 0 0 0 $F1 $F1 $F1 $F1 $F1 $F1 $F1 $F1             
DEFINEBLOCK		WALLBLOCK $FE,$FE,$FE,$00,$EF,$EF,$EF,$00,$4A,$4A,$4A,$4A,$4A,$4A,$4A,$4A
DEFINEBLOCK     LADDERBLOCK 0 0 255 0 0 0 255 0 $F1 $F1 $F1 $F1 $F1 $F1 $F1 $F1
DEFINEBLOCK     FODDERBLOCK 170 85 170 85 170 85 170 85 $21 $21 $21 $21 $21 $21 $21 $21
DEFINEBLOCK     COLLECTABLE 6 9 9 22 32 64 224 64 $F1 $F1 $F1 $F1 $F1 $F1 $F1 $F1 

DEFINESPRITE    4
				67,55,103,39,19,15,1,1,3,3,7,15,23,19,56,120
				128,197,226,229,228,248,240,240,240,224,224,224,208,144,24,60
					
				0,3,7,87,39,83,15,1,1,3,3,7,15,23,227,224
				0,128,192,229,226,237,241,240,240,240,224,224,240,200,227,15
				
				3,7,7,7,67,35,253,33,3,3,7,15,23,19,56,120
				128,192,224,224,224,241,250,247,242,225,224,224,208,144,24,60
				
				3,7,7,87,35,83,13,1,3,3,7,7,7,3,15,15
				128,192,224,229,226,253,241,240,240,224,224,224,224,160,112,112				
				
DEFINESPRITE    4
				1,195,199,39,47,31,15,15,15,7,7,7,59,33,224,224
				192,224,224,224,192,243,143,128,192,216,246,247,224,192,0,0
				
				1,3,7,199,207,63,15,15,15,7,55,47,227,225,0,0
				192,224,224,227,207,240,128,128,192,192,232,244,231,199,0,0
				
				1,3,7,7,15,207,223,47,15,63,231,231,3,1,0,0
				192,227,227,228,200,240,128,128,192,192,224,240,232,196,7,7			
				
				1,3,7,199,207,63,15,15,15,7,55,47,227,225,0,0
				192,224,224,227,207,240,128,128,192,192,232,244,231,199,0,0

DEFINESPRITE    2
				31,63,95,79,110,76,253,215,83,127,47,138,160,234,255,127
				240,252,254,52,31,159,127,255,255,223,30,184,96,224,224,192
				
				15,63,127,124,248,249,254,255,255,251,120,29,6,7,7,3
				248,252,250,242,118,50,191,235,202,254,244,81,5,87,255,254
				
DEFINESPRITE    1
				1,7,27,103,159,224,159,159,207,103,51,27,13,6,3,1
				128,224,56,142,195,63,193,193,195,134,140,24,48,96,192,128

DEFINESCREEN      1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1   1   1   1   2   2   1
                  1   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   0   0   0   2   2   1
                  1   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   0   0   0   2   2   1
                  1   2   2   1   1   1   1   1   1   1   1   1   1   1   2   2   1   1   1   2   2   1
                  1   2   2   0   0   0   0   0   0   0   0   0   0   0   2   2   0   0   0   2   2   1
                  1   2   2   0   0   0   0   0   0   0   0   0   0   0   2   2   0   0   0   2   2   1
                  1   1   1   2   2   1   1   1   1   1   1   1   1   1   1   1   1   1   1   2   2   1
                  1   0   0   2   2   0   0   0   0   0   0   0   0   0   0   0   0   0   0   2   2   1
                  1   0   0   2   2   0   0   0   0   0   0   0   0   0   0   0   0   0   0   2   2   1
                  1   1   1   1   1   2   2   1   1   1   1   1   1   2   2   1   1   1   1   2   2   1
                  1   0   0   0   0   2   2   0   0   0   0   0   0   2   2   0   0   0   0   2   2   1
                  1   0   0   0   0   2   2   0   0   0   0   0   0   2   2   0   0   0   0   2   2   1
                  1   1   1   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1   1   2   2   1
                  1   0   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   0   2   2   1
                  1   0   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   0   2   2   1
                  1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1
                  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
SPRITEPOSITION  0 0 9 104 120
SPRITEPOSITION  1 2 15 128 16
SPRITEPOSITION  2 3 7 152 16
SPRITEPOSITION  2 3 7 56 80
SPRITEPOSITION  2 3 7 80 160
SPRITEPOSITION  2 3 7 32 16
;
DEFINESCREEN      1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   2   2   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   2   2   1
                  1   2   2   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   2   2   1
                  1   2   2   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   2   2   1
                  1   1   1   1   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1   1   1   1
                  1   0   0   0   0   0   0   0   0   0   2   2   1   1   1   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   2   2   1   1   1   0   0   0   0   0   0   1
                  1   1   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1   2   2   1   1   1
                  1   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   2   2   0   0   1
                  1   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   2   2   0   0   1
                  1   1   1   1   2   2   1   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1
                  1   0   0   0   2   2   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   1
                  1   0   0   0   2   2   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   1
                  1   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1   1   1   2   2   1   1
                  1   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   0   0   2   2   0   1
                  1   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   0   0   2   2   0   1
                  1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1
                  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
SPRITEPOSITION  0 0 9 80 64
SPRITEPOSITION  1 2 15 128 16
SPRITEPOSITION  1 2 15 32 16
SPRITEPOSITION  2 3 7 32 80
SPRITEPOSITION  2 3 7 56 112
SPRITEPOSITION  2 3 7 80 128
SPRITEPOSITION  2 3 7 128 88
				  

DEFINESCREEN      1   1   1   1   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0   0   1
                  1   1   1   1   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0   0   1
                  1   1   1   1   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0   0   1
                  1   1   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1   1   1   2   2   1
                  1   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   0   1   2   2   1
                  1   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   0   1   2   2   1
                  1   1   1   2   2   1   1   1   1   1   1   1   1   2   2   1   1   1   1   2   2   1
                  1   0   0   2   2   0   0   0   0   0   0   0   0   2   2   0   0   0   0   2   2   1
                  1   0   0   2   2   0   0   0   0   0   0   0   0   2   2   0   0   0   0   2   2   1
                  1   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1   1   1   1   1   1   1
                  1   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   1   1   1   2   2   1   1   1   1   1   1   1   1   1   2   2   1   1   1   1   1
                  1   0   0   0   2   2   0   0   0   0   0   0   0   0   0   2   2   0   0   0   0   1
                  1   0   0   0   2   2   0   0   0   0   0   0   0   0   0   2   2   0   0   0   0   1
                  1   2   2   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   2   2   1
                  1   2   2   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   2   2   1
                  1   2   2   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   2   2   1
                  1   1   1   1   1   2   2   1   1   1   1   1   1   1   1   2   2   1   1   1   1   1
                  1   0   0   0   0   2   2   0   0   0   0   1   0   0   0   2   2   0   0   0   0   1
                  1   0   0   0   0   2   2   0   0   0   0   1   0   0   0   2   2   0   0   0   0   1
                  1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1				  
SPRITEPOSITION  0 0 9 64 136
SPRITEPOSITION  1 2 15 40 56
SPRITEPOSITION  1 2 15 112 64
SPRITEPOSITION  2 3 7 16 40
SPRITEPOSITION  2 3 7 16 128
SPRITEPOSITION  2 3 7 88 152
SPRITEPOSITION  2 3 7 136 88
SPRITEPOSITION  2 3 7 160 16
SPRITEPOSITION  2 3 7 160 160
				  

DEFINESCREEN      1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   1   1   1   1   1   1   1   1   1   1   2   2   1   2   2   1   1   1   1   1   1
                  1   0   0   0   0   0   0   0   0   0   0   2   2   1   2   2   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   0   2   2   1   2   2   0   0   0   0   0   1
                  1   1   1   1   1   2   2   1   1   1   1   1   1   1   1   1   1   2   2   1   1   1
                  1   0   0   0   0   2   2   0   0   0   0   0   0   0   0   0   0   2   2   0   0   1
                  1   0   0   0   0   2   2   0   0   0   0   0   0   0   0   0   0   2   2   0   0   1
                  1   1   1   1   1   1   1   1   1   1   1   1   1   1   2   2   1   1   1   1   1   1
                  1   0   0   0   0   0   0   1   0   0   0   0   0   0   2   2   0   0   0   0   0   1
                  1   0   0   0   0   0   0   1   0   0   0   0   0   0   2   2   0   0   0   0   0   1
                  1   1   1   1   1   2   2   1   1   2   2   1   1   1   1   1   1   1   1   2   2   1
                  1   0   0   0   0   2   2   0   0   2   2   0   0   0   0   0   0   0   0   2   2   1
                  1   0   0   0   0   2   2   0   0   2   2   0   0   0   0   0   0   0   0   2   2   1
                  1   2   2   1   1   1   1   1   1   1   1   1   1   1   2   2   1   1   1   1   1   1
                  1   2   2   0   0   0   0   0   0   0   0   0   0   0   2   2   1   0   0   0   0   1
                  1   2   2   0   0   0   0   0   0   0   0   0   0   0   2   2   1   0   0   0   0   1
                  1   1   1   1   2   2   1   1   1   1   1   1   1   1   1   1   1   2   2   1   1   1
                  1   0   0   0   2   2   0   0   0   0   0   0   0   0   0   0   0   2   2   0   0   1
                  1   0   0   0   2   2   0   0   0   0   0   0   0   0   0   0   0   2   2   0   0   1
                  1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1
SPRITEPOSITION  0 0 9 160 16
SPRITEPOSITION  1 2 15 16 104
SPRITEPOSITION  1 2 15 64 80
SPRITEPOSITION  1 2 15 112 112
SPRITEPOSITION  2 3 7 16 16
SPRITEPOSITION  2 3 7 88 16
SPRITEPOSITION  2 3 7 136 160
SPRITEPOSITION  2 3 7 16 152
SPRITEPOSITION  2 3 7 64 24

DEFINESCREEN      1   0   0   0   0   0   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1
                  1   0   0   0   0   4   1   0   0   0   3   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   1   0   0   0   3   0   0   0   0   0   0   0   0   0   0   1
                  1   2   2   1   1   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1   1   1
                  1   2   2   1   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   0   1
                  1   2   2   1   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   0   1
                  1   2   2   1   1   1   1   1   2   2   1   1   1   1   2   2   1   1   1   2   2   1
                  1   2   2   0   0   0   0   0   2   2   0   0   0   0   2   2   0   0   0   2   2   1
                  1   2   2   0   0   0   0   0   2   2   0   0   0   0   2   2   0   0   0   2   2   1
                  1   1   1   1   1   2   2   1   1   1   1   2   2   1   1   1   1   1   1   1   1   1
                  1   1   0   0   0   2   2   0   0   0   0   2   2   0   0   0   0   0   0   0   0   1
                  1   1   0   0   0   2   2   0   0   0   0   2   2   0   0   0   0   0   0   0   0   1
                  1   1   2   2   1   1   1   1   1   1   1   1   1   1   1   1   1   2   2   1   1   1
                  1   1   2   2   0   0   0   0   0   0   0   0   0   0   0   0   0   2   2   0   0   1
                  1   1   2   2   0   0   0   0   0   0   0   0   0   0   0   0   0   2   2   0   0   1
                  1   1   1   1   1   2   2   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1
                  1   0   0   0   0   2   2   0   0   0   0   0   1   2   2   0   0   0   0   0   0   1
                  1   0   0   0   0   2   2   0   0   0   0   0   1   2   2   0   0   0   0   0   0   1
                  1   2   2   1   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1   2   2   1
                  1   2   2   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   2   2   1
                  1   2   2   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   2   2   1
                  1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1
SPRITEPOSITION  0 0 9 112 160
SPRITEPOSITION  1 2 15 88 72
SPRITEPOSITION  1 2 15 16 160
SPRITEPOSITION  1 2 15 160 64
SPRITEPOSITION  2 3 7 88 160
SPRITEPOSITION  2 3 7 40 40
SPRITEPOSITION  2 3 7 16 64
SPRITEPOSITION  2 3 7 160 104


;DEFINEOBJECT    254 56 120
;                0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
;                0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0

MAP             WIDTH 6
                STARTSCREEN 255
                255 0 1 2 3 255
ENDMAP


EVENT PLAYER

;SPRITEINK 7
IF KEY UP
    IF LADDERABOVE
        LET IMAGE = 1
        ANIMATE MEDIUM
        SPRITEUP
    ENDIF
ENDIF
IF KEY DOWN
    IF LADDERBELOW
        LET IMAGE = 1
        ANIMATE MEDIUM
        SPRITEDOWN
    ENDIF
ENDIF
IF KEY RIGHT
    IF CANGORIGHT
        TRAIL
        LET IMAGE = 0
        ANIMATE MEDIUM
        SPRITERIGHT
    ELSE
        IF K > 0
            DIG RIGHT
        ENDIF
    ENDIF
ENDIF
IF KEY LEFT
    IF CANGOLEFT
        TRAIL
        LET IMAGE = 0
        ANIMATE MEDIUM
        SPRITELEFT
    ELSE
        IF K > 0
            DIG LEFT
        ENDIF
    ENDIF
ENDIF
;SPRITEINK 6
GETBLOCKS

EVENT SPRITETYPE1

; Enemy climbing a ladder.
IF DIRECTION = 0
    IF LADDERABOVE
        SPRITEUP
    ELSE
        GETRANDOM 2
        IF RND = 0
            LET DIRECTION = 2
        ELSE
            LET DIRECTION = 3
        ENDIF
        LET SETTINGA = 50
    ENDIF
ENDIF

; Enemy descending a ladder.
IF DIRECTION = 1
    IF LADDERBELOW
        SPRITEDOWN
    ELSE
        GETRANDOM 2
        IF RND = 0
            LET DIRECTION = 2
        ELSE
            LET DIRECTION = 3
        ENDIF
        LET SETTINGA = 50
    ENDIF
ENDIF

; Enemy moving left.
IF DIRECTION = 2
    IF CANGOLEFT
        SPRITELEFT
        LET FRAME = 0
    ELSE
        LET DIRECTION = 3
    ENDIF
    IF SETTINGA > 0
        SUBTRACT 1 FROM SETTINGA
    ELSE
        GETRANDOM 4
        IF RND = 0
            IF LADDERABOVE
                LET DIRECTION = 0
            ELSE
                IF LADDERBELOW
                    LET DIRECTION = 1
                ENDIF
            ENDIF
        ENDIF
    ENDIF
ENDIF

; Enemy moving right.
IF DIRECTION = 3
    IF CANGORIGHT
        SPRITERIGHT
        LET FRAME = 1
    ELSE
        LET DIRECTION = 2
    ENDIF
    IF SETTINGA > 0
        SUBTRACT 1 FROM SETTINGA
    ELSE
        GETRANDOM 4
        IF RND = 0
            IF LADDERABOVE
                LET DIRECTION = 0
            ELSE
                IF LADDERBELOW
                    LET DIRECTION = 1
                ENDIF
            ENDIF
        ENDIF
    ENDIF
ENDIF

; Test if hit player.
IF COLLISION 0
    KILL
ENDIF


EVENT SPRITETYPE2

IF SETTINGA = 0
    IF SETTINGB = 66
        LET SETTINGA = 1
    ELSE
        SUBTRACT 1 FROM SETTINGB
    ENDIF
ELSE
    IF SETTINGB = 70
        LET SETTINGA = 0
    ELSE
        ADD 1 TO SETTINGB
    ENDIF
ENDIF

SPRITEINK SETTINGB

IF COLLISION 0
    REMOVE
    EXPLODE 16
    SCORE 100
    SUBTRACT 1 FROM A
    IF A = 0
        DELAY 50
        WHILE T > 0
            SUBTRACT 1 FROM T
            SCORE 1
            AT 12 26
            DISPLAY SECONDS T
            AT 3 25
            SHOWSCORE
            BEEP 50
            DELAY 2
        ENDWHILE
        NEXTLEVEL
    ENDIF
    ;SOUND 1
    AT 3 25
    SHOWSCORE
ENDIF


EVENT SPRITETYPE3



EVENT SPRITETYPE4



EVENT SPRITETYPE5



EVENT SPRITETYPE6



EVENT SPRITETYPE7



EVENT SPRITETYPE8



EVENT INITSPRITE

IF TYPE = 2
    ADD 1 TO A
    LET SETTINGA = 0
    LET SETTINGB = 69
ENDIF


EVENT MAINLOOP1

; Update the bonus timer.
ADD 1 TO S
IF S > 50
    SUBTRACT 50 FROM S
    IF T > 0
        SUBTRACT 1 FROM T
    ENDIF
    AT 12 26
    DISPLAY SECONDS T
ENDIF


EVENT MAINLOOP2



EVENT INTROMENU

; INK 15
;PAPER 1
BORDER 1
COLOUR $71
CLS
AT 4 9
LET CONTROL = 99
WHILE CONTROL >= 99
    CLS
    AT 5 9
    PRINTMODE 1
	MESSAGE 1
	COLOUR $F1
    PRINTMODE 0
    AT 9 9
	MESSAGE 4
    AT 11 9
	MESSAGE 5
    AT 13 9
	MESSAGE 6
    LET CONTROL = 99
    WHILE CONTROL = 99
        IF KEY OPTION1
            LET CONTROL = 0
        ENDIF
        IF KEY OPTION2
            LET CONTROL = 1
        ENDIF
        IF KEY OPTION3
            LET CONTROL = 2
        ENDIF
    ENDWHILE
ENDWHILE
CLS

EVENT GAMEINIT

LET LIVES = 3
LET SCREEN = 0
COLOUR $F1
BORDER 1
CLS
AT 2 25
PRINT "SCORE"
AT 5 25
PRINT "LIVES"
AT 8 26
PRINT "HIGH"
AT 11 26
PRINT "TIME"
AT 12 27
PRINT ":"
AT 14 25
PRINT "LEVEL"
COLOUR $1A
AT 3 25
SHOWSCORE
AT 9 25
SHOWHIGH

EVENT RESTARTSCREEN

AT 6 27
DISPLAY LIVES

LET S = SCREEN
ADD 1 TO S
AT 15 26
DISPLAY TRIPLEDIGITS S

LET A = 0
LET T = 60                      ; 60 seconds
LET S = 0                       ; 25ths of a second

LET K = 0                       ; no  keys collected yet.

EVENT FELLTOOFAR

IF TYPE = 0
    KILL
ENDIF


EVENT KILLPLAYER

;SOUND 0
; FADE
SUBTRACT 1 FROM LIVES


EVENT LOSTGAME

DELAY 50


EVENT COMPLETEDGAME
COLOUR $F4
CLW
PRINTMODE 1
AT 11 7
PRINT "WELL DONE!"
PRINTMODE 0
DELAY 200


EVENT NEWHIGHSCORE
; INK 5
; PAPER 0
COLOUR $AD
CLW
PRINTMODE 1
AT 4 5
PRINT "NEW HIGH SCORE"
PRINTMODE 0
DELAY 200

EVENT COLLECTBLOCK

LET K = 1